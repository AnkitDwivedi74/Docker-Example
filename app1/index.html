<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App1</title>
</head>
<body>
    <h1>Hello from App1!</h1>
    <form id="send-data-form">
        <label for="message">Message to App2:</label>
        <input type="text" id="message" name="message" required>
        <button type="submit">Send</button>
    </form>
    <p id="response-from-app2"></p>

<script>
    const form = document.getElementById('send-data-form');
    const responseElement = document.getElementById('response-from-app2');

    form.addEventListener('submit', (event) => {
        event.preventDefault();

        const message = document.getElementById('message').value;

        const app2ContainerAlias = process.env.APP2_CONTAINER_NAME || 'app2alias';
        const app2IP = getIPAddress(app2ContainerAlias);
        const app2URL = `http://${app2IP}:3002/receive-data`;

        fetch(app2URL, {
            method: 'POST',
            body: JSON.stringify({ message })        })
        .then(response => response.json())
        .then(data => {
            responseElement.textContent = data.response;
        })
        .catch(error => {
            console.error('Error sending data:', error);
        });
    });

    function getIPAddress(containerAlias) {
        return process.env[`${containerAlias.toUpperCase()}_IP`] || containerAlias;
    }
</script>

</body>
</html>
